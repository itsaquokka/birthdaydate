<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Celebration Choices</title>
<style>
body { font-family: Arial; text-align:center; background: #ffe6f0; margin:0; }
.container { max-width:600px; margin:40px auto; }
button { padding:10px 20px; border:none; border-radius:10px; cursor:pointer; margin-top:20px; }
</style>
</head>
<body>

<div class="container">

    <h1>ğŸ‰ Rank Your Preferences ğŸ‰</h1>
    <p style="color:red; font-weight:bold;">
    NOTE: WE ARE NOT GOING FOR CHINESE FOOD CUZ WE GOING CHINA HEEHE ğŸ˜‚ğŸ‡¨ğŸ‡³
    </p>

    <!-- ================= FOOD ================= -->
    <h2>ğŸ´ Rank Your Food</h2>
    <form id="foodForm">
        Sushi ğŸ£ <select name="Sushi ğŸ£"></select><br><br>
        Pizza ğŸ• <select name="Pizza ğŸ•"></select><br><br>
        Burger ğŸ” <select name="Burger ğŸ”"></select><br><br>
        Steak ğŸ¥© <select name="Steak ğŸ¥©"></select><br><br>
        Pasta ğŸ <select name="Pasta ğŸ"></select><br><br>
        Korean BBQ ğŸ¥“ <select name="Korean BBQ ğŸ¥“"></select><br><br>
    </form>

    <!-- ================= CAKE ================= -->
    <h2>ğŸ° Rank Your Cake</h2>
    <form id="cakeForm">
        Chocolate ğŸ« <select name="Chocolate ğŸ«"></select><br><br>
        Vanilla ğŸ¦ <select name="Vanilla ğŸ¦"></select><br><br>
        Matcha ğŸµ <select name="Matcha ğŸµ"></select><br><br>
        Cheesecake ğŸ§€ğŸ° <select name="Cheesecake ğŸ§€ğŸ°"></select><br><br>
        Mango ğŸ¥­ <select name="Mango ğŸ¥­"></select><br><br>
    </form>

    <!-- ================= DATE ================= -->
    <h2>ğŸ’– Rank Your Date Type</h2>
    <form id="dateForm">
        Hiking â›°ï¸ <select name="Hiking â›°ï¸"></select><br><br>
        Oceanarium ğŸ ğŸŒŠ <select name="Oceanarium ğŸ ğŸŒŠ"></select><br><br>
        Picnic ğŸŒ³ğŸ¥ª <select name="Picnic ğŸŒ³ğŸ¥ª"></select><br><br>
        Cycling ğŸš² <select name="Cycling ğŸš²"></select><br><br>
        Home Date ğŸ ğŸ˜ <select name="Home Date ğŸ ğŸ˜"></select><br><br>
    </form>

    <!-- ================= GIFT ================= -->
    <h2>ğŸ Rank Your Gift</h2>
    <form id="giftForm">
        Gold ğŸ¥‡ <select name="Gold ğŸ¥‡"></select><br><br>
        Me ğŸ˜³ <select name="Me ğŸ˜³"></select><br><br>
        Flowers ğŸŒ¸ <select name="Flowers ğŸŒ¸"></select><br><br>
        Watch âŒš <select name="Watch âŒš"></select><br><br>
        Games ğŸ® <select name="Games ğŸ®"></select><br><br>
        Perfume ğŸ§´ <select name="Perfume ğŸ§´"></select><br><br>
    </form>

    <button id="sendBtn">Submit Rankings ğŸ’Œ</button>

</div>

<script>
    // Generate ranking options dynamically
    function generateOptions(formId) {
        const selects = document.querySelectorAll(`#${formId} select`);
        const total = selects.length;

        selects.forEach(select => {
            select.innerHTML = `<option value="">-- Rank --</option>`;
            for (let i = 1; i <= total; i++) {
                select.innerHTML += `<option value="${i}">${i}</option>`;
            }
        });
    }

    generateOptions("foodForm");
    generateOptions("cakeForm");
    generateOptions("dateForm");
    generateOptions("giftForm");


    // Validate ranking
    function validateForm(formId) {
        const selects = document.querySelectorAll(`#${formId} select`);
        let usedRanks = [];

        for (let select of selects) {
            if (!select.value) {
                return false;
            }
            if (usedRanks.includes(select.value)) {
                return false;
            }
            usedRanks.push(select.value);
        }
        return true;
    }


    // Sort results by rank
    function getSortedResults(formId) {
        const selects = document.querySelectorAll(`#${formId} select`);
        let results = [];

        selects.forEach(select => {
            results.push({
                name: select.name,
                rank: parseInt(select.value)
            });
        });

        results.sort((a, b) => a.rank - b.rank);

        return results.map(item => `Rank ${item.rank}: ${item.name}`).join("\n");
    }


    document.getElementById("sendBtn").addEventListener("click", () => {

        if (!validateForm("foodForm") ||
            !validateForm("cakeForm") ||
            !validateForm("dateForm") ||
            !validateForm("giftForm")) {

            alert("Please rank ALL options properly (no duplicates) ğŸ˜¤");
            return;
        }

        const summary = `
    ğŸ‰ YOUR RANKINGS ğŸ‰

    ğŸ´ FOOD
    ${getSortedResults("foodForm")}

    ğŸ° CAKE
    ${getSortedResults("cakeForm")}

    ğŸ’– DATE
    ${getSortedResults("dateForm")}

    ğŸ GIFT
    ${getSortedResults("giftForm")}

    Sent with love ğŸ’Œ
    `;

    // Store choices for success page
    llocalStorage.setItem("birthdayChoices", summary);

    // Copy to clipboard
    navigator.clipboard.writeText(summary).then(() => {
        alert("Yay! Choices copied ğŸ˜ğŸ’Œ");
        window.location.href = "https://itsaquokka.github.io/birthdaydate/success.html";
    }).catch(() => {
        alert("Clipboard failed ğŸ˜… Please copy manually.");
        window.location.href = "https://itsaquokka.github.io/birthdaydate/success.html";
    });
});
</script>

</body>
</html>
